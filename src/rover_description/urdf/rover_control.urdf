<?xml version="1.0"?>
<robot name="simple_rover">

  <!-- base -->
  <link name="base_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="5.0"/>
      <inertia ixx="0.03" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.07"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.08" rpy="0 0 0"/>
      <geometry><box size="0.40 0.30 0.06"/></geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0.08" rpy="0 0 0"/>
      <geometry><box size="0.40 0.30 0.06"/></geometry>
    </collision>
  </link>

  <!-- wheels -->
  <link name="left_front_wheel">
    <visual><origin rpy="1.5708 0 0"/><geometry><cylinder radius="0.05" length="0.03"/></geometry></visual>
    <collision><origin rpy="1.5708 0 0"/><geometry><cylinder radius="0.05" length="0.03"/></geometry></collision>
    <inertial><mass value="0.5"/><inertia ixx="0.0003" ixy="0" ixz="0" iyy="0.0003" iyz="0" izz="0.0001"/></inertial>
  </link>
  <link name="left_rear_wheel">
    <visual><origin rpy="1.5708 0 0"/><geometry><cylinder radius="0.05" length="0.03"/></geometry></visual>
    <collision><origin rpy="1.5708 0 0"/><geometry><cylinder radius="0.05" length="0.03"/></geometry></collision>
    <inertial><mass value="0.5"/><inertia ixx="0.0003" ixy="0" ixz="0" iyy="0.0003" iyz="0" izz="0.0001"/></inertial>
  </link>
  <link name="right_front_wheel">
    <visual><origin rpy="1.5708 0 0"/><geometry><cylinder radius="0.05" length="0.03"/></geometry></visual>
    <collision><origin rpy="1.5708 0 0"/><geometry><cylinder radius="0.05" length="0.03"/></geometry></collision>
    <inertial><mass value="0.5"/><inertia ixx="0.0003" ixy="0" ixz="0" iyy="0.0003" iyz="0" izz="0.0001"/></inertial>
  </link>
  <link name="right_rear_wheel">
    <visual><origin rpy="1.5708 0 0"/><geometry><cylinder radius="0.05" length="0.03"/></geometry></visual>
    <collision><origin rpy="1.5708 0 0"/><geometry><cylinder radius="0.05" length="0.03"/></geometry></collision>
    <inertial><mass value="0.5"/><inertia ixx="0.0003" ixy="0" ixz="0" iyy="0.0003" iyz="0" izz="0.0001"/></inertial>
  </link>

  <!-- wheel joints  -->
  <joint name="left_front_wheel_joint" type="continuous">
    <origin xyz="0.15 0.15 0.05"/>
    <parent link="base_link"/>
    <child link="left_front_wheel"/>
    <axis xyz="0 1 0"/>
  </joint>
  <joint name="left_rear_wheel_joint" type="continuous">
    <origin xyz="-0.15 0.15 0.05"/>
    <parent link="base_link"/>
    <child link="left_rear_wheel"/>
    <axis xyz="0 1 0"/>
  </joint>
  <joint name="right_front_wheel_joint" type="continuous">
    <origin xyz="0.15 -0.15 0.05"/>
    <parent link="base_link"/>
    <child link="right_front_wheel"/>
    <axis xyz="0 1 0"/>
  </joint>
  <joint name="right_rear_wheel_joint" type="continuous">
    <origin xyz="-0.15 -0.15 0.05"/>
    <parent link="base_link"/>
    <child link="right_rear_wheel"/>
    <axis xyz="0 1 0"/>
  </joint>

<!-- ros2_control block -->
<ros2_control name="GazeboSimSystem" type="system">
  <hardware>
    <plugin>gz_ros2_control/GazeboSimSystem</plugin>
  </hardware>

  <joint name="left_front_wheel_joint">
    <command_interface name="velocity"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>
  <joint name="left_rear_wheel_joint">
    <command_interface name="velocity"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>
  <joint name="right_front_wheel_joint">
    <command_interface name="velocity"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>
  <joint name="right_rear_wheel_joint">
    <command_interface name="velocity"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>
</ros2_control>

<!-- Gazebo plugin hosts controller_manager -->
<gazebo>
  <plugin filename="gz_ros2_control-system"
          name="gz_ros2_control::GazeboSimROS2ControlPlugin">
    <controller_manager_name>controller_manager</controller_manager_name>
    <parameters>$(find rover_launch)/config/rover_ros2_control.yaml</parameters>
  </plugin>
</gazebo>
<gazebo reference="left_front_wheel"><mu1>1.0</mu1><mu2>1.0</mu2></gazebo>
<gazebo reference="left_rear_wheel"><mu1>1.0</mu1><mu2>1.0</mu2></gazebo>
<gazebo reference="right_front_wheel"><mu1>1.0</mu1><mu2>1.0</mu2></gazebo>
<gazebo reference="right_rear_wheel"><mu1>1.0</mu1><mu2>1.0</mu2></gazebo>




</robot>
